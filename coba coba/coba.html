<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Underwater Scroll Animation</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    font-family: sans-serif;
  }

  .page {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .page1 {
    background: linear-gradient(to bottom, #87ceeb, #fff);
  }

  .page2 {
    position: relative;
    background: #001d3d; /* gelap bawah laut */
    color: #fff;
    overflow: hidden;
  }

  /* Canvas untuk gelembung & cahaya */
  #underwater {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
  }

  /* Container ikan */
  .fish-container {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
  }

  /* Animasi gelombang cahaya */
  @keyframes light {
    0% {background-position: 0 0;}
    100% {background-position: 200px 400px;}
  }

  .page2::before {
    content: '';
    position: absolute;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.08), transparent 70%);
    animation: light 10s linear infinite;
    z-index: 0;
    pointer-events: none;
  }

  /* Gaya ikan */
  .fish {
    position: absolute;
    border-radius: 50%;
    background: orange;
  }
</style>
</head>
<body>
  <div class="page page1">
    <h1>Halaman 1</h1>
    <p>Scroll untuk masuk ke laut...</p>
  </div>
  <div class="page page2">
    <canvas id="underwater"></canvas>
    <div class="fish-container"></div>
    <h1>Selamat Datang di Laut</h1>
  </div>

<script>
const canvas = document.getElementById('underwater');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let bubbles = [];
let fishCount = 10;
let fishContainer = document.querySelector('.fish-container');

// Gelembung
class Bubble {
  constructor() {
    this.reset();
  }
  reset() {
    this.x = Math.random() * canvas.width;
    this.y = canvas.height + Math.random() * 200;
    this.radius = 20 + Math.random() * 40; // besar-besar
    this.speed = 1 + Math.random() * 2;
    this.opacity = 0.4 + Math.random() * 0.6;
  }
  update() {
    this.y -= this.speed;
    if (this.y + this.radius < 0) this.reset();
  }
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
    ctx.fillStyle = `rgba(255,255,255,${this.opacity})`;
    ctx.fill();
  }
}

// Ikan
function createFish() {
  for(let i=0; i<fishCount; i++) {
    const fish = document.createElement('div');
    fish.className = 'fish';
    fish.style.width = `${30 + Math.random()*40}px`;
    fish.style.height = `${15 + Math.random()*25}px`;
    fish.style.top = `${Math.random()*canvas.height}px`;
    fish.style.left = `${Math.random()*canvas.width}px`;
    fish.style.transform = `rotate(${Math.random()*360}deg)`;
    fishContainer.appendChild(fish);
    moveFish(fish);
  }
}

function moveFish(fish) {
  const duration = 5000 + Math.random()*5000;
  const x = Math.random()*(window.innerWidth-50);
  const y = Math.random()*(window.innerHeight-50);
  fish.animate([
    { transform: `translate(${fish.offsetLeft}px, ${fish.offsetTop}px)` },
    { transform: `translate(${x}px, ${y}px)` }
  ], { duration: duration, iterations: Infinity, direction: 'alternate', easing: 'ease-in-out' });
}

// Scroll trigger
let underwaterStarted = false;
window.addEventListener('scroll', () => {
  const page2Top = document.querySelector('.page2').offsetTop;
  if(window.scrollY >= page2Top && !underwaterStarted) {
    underwaterStarted = true;
    // Buat gelembung
    for(let i=0;i<30;i++){
      bubbles.push(new Bubble());
    }
    // Buat ikan
    createFish();
    animate();
  }
});

// Animasi canvas
function animate() {
  ctx.clearRect(0,0,canvas.width, canvas.height);
  for(let b of bubbles) {
    b.update();
    b.draw();
  }
  requestAnimationFrame(animate);
}

window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
